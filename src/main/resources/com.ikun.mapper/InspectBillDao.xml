<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ikun.dao.InspectBillDao">

    <resultMap type="com.ikun.entity.InspectBill" id="InspectBillMap">
        <result property="id" column="id" jdbcType="INTEGER"/>
        <result property="custName" column="cust_name" jdbcType="VARCHAR"/>
        <result property="custCard" column="cust_card" jdbcType="VARCHAR"/>
        <result property=" licenseNumber" column=" license_number" jdbcType="VARCHAR"/>
        <result property="personId" column="person_id" jdbcType="VARCHAR"/>
        <result property="overTime" column="over_time" jdbcType="VARCHAR"/>
        <result property="carStart" column="car_start" jdbcType="VARCHAR"/>
        <result property="carEnd" column="car_end" jdbcType="VARCHAR"/>
        <result property="indemnity" column="indemnity" jdbcType="VARCHAR"/>
    </resultMap>

    <!--查询单个-->
    <select id="queryById" resultMap="InspectBillMap">
        select
          id, cust_name, cust_card,  license_number, person_id, over_time, car_start, car_end, indemnity
        from inspect_bill
        where id = #{id}
    </select>

    <!--查询指定行数据-->
    <select id="queryAllByLimit" resultMap="InspectBillMap">
        select
          id, cust_name, cust_card,  license_number, person_id, over_time, car_start, car_end, indemnity
        from inspect_bill
        <where>
            <if test="id != null">
                and id = #{id}
            </if>
            <if test="custName != null and custName != ''">
                and cust_name = #{custName}
            </if>
            <if test="custCard != null and custCard != ''">
                and cust_card = #{custCard}
            </if>
            <if test=" licenseNumber != null and  licenseNumber != ''">
                and  license_number = #{ licenseNumber}
            </if>
            <if test="personId != null and personId != ''">
                and person_id = #{personId}
            </if>
            <if test="overTime != null and overTime != ''">
                and over_time = #{overTime}
            </if>
            <if test="carStart != null and carStart != ''">
                and car_start = #{carStart}
            </if>
            <if test="carEnd != null and carEnd != ''">
                and car_end = #{carEnd}
            </if>
            <if test="indemnity != null and indemnity != ''">
                and indemnity = #{indemnity}
            </if>
        </where>
        limit #{pageable.offset}, #{pageable.pageSize}
    </select>

    <!--统计总行数-->
    <select id="count" resultType="java.lang.Long">
        select count(1)
        from inspect_bill
        <where>
            <if test="id != null">
                and id = #{id}
            </if>
            <if test="custName != null and custName != ''">
                and cust_name = #{custName}
            </if>
            <if test="custCard != null and custCard != ''">
                and cust_card = #{custCard}
            </if>
            <if test=" licenseNumber != null and  licenseNumber != ''">
                and  license_number = #{ licenseNumber}
            </if>
            <if test="personId != null and personId != ''">
                and person_id = #{personId}
            </if>
            <if test="overTime != null and overTime != ''">
                and over_time = #{overTime}
            </if>
            <if test="carStart != null and carStart != ''">
                and car_start = #{carStart}
            </if>
            <if test="carEnd != null and carEnd != ''">
                and car_end = #{carEnd}
            </if>
            <if test="indemnity != null and indemnity != ''">
                and indemnity = #{indemnity}
            </if>
        </where>
    </select>

    <!--新增所有列-->
    <insert id="insert" keyProperty="id" useGeneratedKeys="true">
        insert into inspect_bill(cust_name, cust_card,  license_number, person_id, over_time, car_start, car_end, indemnity)
        values (#{custName}, #{custCard}, #{ licenseNumber}, #{personId}, #{overTime}, #{carStart}, #{carEnd}, #{indemnity})
    </insert>

    <insert id="insertBatch" keyProperty="id" useGeneratedKeys="true">
        insert into inspect_bill(cust_name, cust_card,  license_number, person_id, over_time, car_start, car_end, indemnity)
        values
        <foreach collection="entities" item="entity" separator=",">
        (#{entity.custName}, #{entity.custCard}, #{entity. licenseNumber}, #{entity.personId}, #{entity.overTime}, #{entity.carStart}, #{entity.carEnd}, #{entity.indemnity})
        </foreach>
    </insert>

    <insert id="insertOrUpdateBatch" keyProperty="id" useGeneratedKeys="true">
        insert into inspect_bill(cust_name, cust_card,  license_number, person_id, over_time, car_start, car_end, indemnity)
        values
        <foreach collection="entities" item="entity" separator=",">
            (#{entity.custName}, #{entity.custCard}, #{entity. licenseNumber}, #{entity.personId}, #{entity.overTime}, #{entity.carStart}, #{entity.carEnd}, #{entity.indemnity})
        </foreach>
        on duplicate key update
        cust_name = values(cust_name),
        cust_card = values(cust_card),
         license_number = values( license_number),
        person_id = values(person_id),
        over_time = values(over_time),
        car_start = values(car_start),
        car_end = values(car_end),
        indemnity = values(indemnity)
    </insert>

    <!--通过主键修改数据-->
    <update id="update">
        update inspect_bill
        <set>
            <if test="custName != null and custName != ''">
                cust_name = #{custName},
            </if>
            <if test="custCard != null and custCard != ''">
                cust_card = #{custCard},
            </if>
            <if test=" licenseNumber != null and  licenseNumber != ''">
                 license_number = #{ licenseNumber},
            </if>
            <if test="personId != null and personId != ''">
                person_id = #{personId},
            </if>
            <if test="overTime != null and overTime != ''">
                over_time = #{overTime},
            </if>
            <if test="carStart != null and carStart != ''">
                car_start = #{carStart},
            </if>
            <if test="carEnd != null and carEnd != ''">
                car_end = #{carEnd},
            </if>
            <if test="indemnity != null and indemnity != ''">
                indemnity = #{indemnity},
            </if>
        </set>
        where id = #{id}
    </update>

    <!--通过主键删除-->
    <delete id="deleteById">
        delete from inspect_bill where id = #{id}
    </delete>

</mapper>

